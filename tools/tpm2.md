# Криптографический процессор TPM
   * [Управление TPM](#управление-tpm)
      * [Инициализация и управление устройством](#инициализация-и-управление-устройством)
      * [Управление иерархиями и авторизацией](#управление-иерархиями-и-авторизацией)
      * [Управление часами и генератором случайных чисел](#управление-часами-и-генератором-случайных-чисел)
      * [Самотестирование и аудит](#самотестирование-и-аудит)
   * [Управление ключами и объектами](#управление-ключами-и-объектами)
      * [Создание ключей](#создание-ключей)
      * [Загрузка, выгрузка и импорт объектов](#загрузка-выгрузка-и-импорт-объектов)
      * [Использование ключей](#использование-ключей)
      * [Миграция объектов](#миграция-объектов)
      * [Работа с учетными данными и сертификатами](#работа-с-учетными-данными-и-сертификатами)
   * [Вспомогательные команды и утилиты](#вспомогательные-команды-и-утилиты)
## Управление TPM
### Инициализация и управление устройством
<pre>
<b>tpm2 startup</b>                    Инициализирует TPM после включения питания, выполняя самотестирование и восстанавливая состояние
<b>tpm2 shutdown</b>                   Выполняет необходимые операции перед выключением питания TPM, сохраняя его состояние
<b>tpm2 clear</b>                      Сбрасывает авторизацию владельца TPM (обычно требует авторизацию платформы)
<b>tpm2 clearcontrol</b>               Управляет возможностью сброса TPM с помощью физического присутствия или авторизации платформы
<b>tpm2 flushcontext</b>               Удаляет загруженный объект или сессию из памяти TPM
</pre>
### Управление иерархиями и авторизацией
<pre>
<b>tpm2 hierarchycontrol</b>           Управляет состоянием (включено/выключено) иерархий TPM (platform, storage, endorsement)
<b>tpm2 changeauth</b>                 Изменяет значение авторизации для объекта, иерархии или NV-индекса
<b>tpm2 changeeps</b>                  Изменяет первичное зерно иерархии подтверждения (Endorsement Primary Seed)
<b>tpm2 changepps</b>                  Изменяет первичное зерно иерархии платформы (Platform Primary Seed)
<b>tpm2 dictionarylockout</b>          Управляет параметрами блокировки при атаках перебором (например, на пароли)
</pre>
### Управление часами и генератором случайных чисел
<pre>
<b>tpm2 readclock</b>                  Считывает текущее значение часов (clock) и времени (time) TPM
<b>tpm2 setclock</b>                   Устанавливает текущее время TPM (требует авторизации)
<b>tpm2 clockrateadjust</b>            Регулирует скорость хода часов TPM
<b>tpm2 gettime</b>                    Считывает текущее время TPM, значение счетчика clock и информацию о сбросах
<b>tpm2 stirrandom</b>                 Добавляет предоставленные данные (энтропию) во внутренний генератор случайных чисел TPM
</pre>
### Самотестирование и аудит
<pre>
<b>tpm2 selftest</b>                   Запускает полное самотестирование TPM для проверки всех его функций
<b>tpm2 incrementalselftest</b>        Выполняет инкрементальное самотестирование TPM для проверки подмножества функций
<b>tpm2 gettestresult</b>              Получает результаты последнего выполненного самотестирования TPM
<b>tpm2 getcommandauditdigest</b>      Получает дайджест аудита выполненных команд TPM
<b>tpm2 getsessionauditdigest</b>      Получает дайджест аудита для конкретной сессии
<b>tpm2 setcommandauditstatus</b>      Включает или выключает аудит для указанных команд TPM
</pre>
## Управление ключами и объектами
### Создание ключей
<pre>
<b>tpm2 createprimary</b>              Создает первичный ключ в одной из иерархий TPM (endorsement, storage, platform, null)
<b>tpm2 create</b>                     Создает вторичный ключ или объект запечатанных данных под родительским ключом
<b>tpm2 createek</b>                   Создает ключ подтверждения (Endorsement Key)
<b>tpm2 createak</b>                   Создает ключ аттестации (Attestation Key)
</pre>
### Загрузка, выгрузка и импорт объектов
<pre>
<b>tpm2 load</b>                       Загружает ранее созданный (командой create) или импортированный объект (ключ или данные) в память TPM
<b>tpm2 loadexternal</b>               Загружает объект, который не требует родительского ключа (например, открытый ключ или объект HMAC/policy) в TPM
<b>tpm2 import</b>                     Импортирует внешний ключ или объект в TPM, обычно зашифрованный для родительского ключа
<b>tpm2 evictcontrol</b>               Управляет персистентностью объекта TPM, делая его постоянным (в NV) или временным (в RAM)
<b>tpm2 readpublic</b>                 Считывает публичную часть TPM-объекта (ключа или данных)
</pre>
### Использование ключей
<pre>
<b>tpm2 sign</b>                       Подписывает предоставленные данные (или хэш данных) с использованием загруженного асимметричного ключа
<b>tpm2 unseal</b>                     Извлекает (расшифровывает) данные из запечатанного объекта, если текущее состояние TPM удовлетворяет политике запечатывания
</pre>
### Миграция объектов
<pre>
<b>tpm2 duplicate</b>                  Создает дубликат TPM-объекта, который может быть загружен на другой TPM
</pre>
### Работа с учетными данными и сертификатами
<pre>
<b>tpm2 makecredential</b>             Создает зашифрованные учетные данные, которые могут быть активированы на другом TPM с помощью activatecredential
<b>tpm2 activatecredential</b>         Активирует учетные данные, связанные с объектом TPM
<b>tpm2 getekcertificate</b>           Получает сертификат ключа подтверждения (EK certificate), если он был записан в NV-память
<b>tpm2 certifyX509certutil</b>        Утилита для работы с сертификатами X.509, связанными с ключами TPM (часто для EK)
</pre>
## Криптографические операции
### Хеширование и HMAC
### Симметричное шифрование/дешифрование
### Асимметричное шифрование/дешифрование RSA
### Операции с эллиптическими кривыми
### Проверка подписи
### Генерация случайных чисел
## Аттестация
## NV-память
### Создание и удаление NV-индексов
### Чтение и запись в NV-память
### Блокировка и сертификация NV-индексов
## Управление сессиями и политиками
### Управление сессиями
### Создание и управление политиками
### Условия политик
### Авторизация по политике
## Вспомогательные команды и утилиты
<pre>
<b>tpm2 getcap</b>                     Запрашивает различную информацию о возможностях TPM (например, поддерживаемые алгоритмы, свойства)
<b>tpm2 encodeobject</b>               Сериализует (кодирует) TPM-объект в его внешнее представление
<b>tpm2 testparms</b>                  Проверяет, поддерживаются ли указанные параметры алгоритма TPM
<b>tpm2 print</b>                      Печатает детали TPM-объекта в читаемом формате (утилита tpm2-tools)
<b>tpm2 rc_decode</b>                  Декодирует код ответа TPM в человекочитаемое сообщение об ошибке (утилита tpm2-tools)
<b>tpm2 send</b>                       Отправляет необработанную последовательность байт команды напрямую в TPM (низкоуровневая утилита tpm2-tools)
<b>tpm2 tr_encode</b>                  Кодирует дескриптор TPM (handle) в объект TR формата TSS ESAPI (специфично для TPM Software Stack)
</pre>
